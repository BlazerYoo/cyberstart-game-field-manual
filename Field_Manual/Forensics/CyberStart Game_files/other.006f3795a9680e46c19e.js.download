!function(e){var n={};function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)o.d(t,a,function(n){return e[n]}.bind(null,a));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=208)}({208:function(e,n){window.get=function(e){return window.document.getElementById(e)};var o=window.get;window.xhrObj=function(){try{return new XMLHttpRequest}catch(e){}return null};var t=window.xhrObj;window.checkForCSRFFail=function(e){void 0!==e["csrf-fail"]&&(window.location=void 0!==e["license-fail"]?"/expired":"/login")};var a=window.checkForCSRFFail;window.showFlagSuccess=function(){window.$(".modal-success").animate({right:0},300),window.$(".modal-hint").animate({right:-350},300),window.$(".modal-briefing").animate({right:-550},300)};var i=window.showFlagSuccess;window.showConfetti=function(){o("confetti").style.display="block",window.doConfettiResize=!0,window.displayConfetti()};var d=window.showConfetti;window.getScrollbarWidth=function(){return window.innerWidth-document.body.offsetWidth};var l=window.getScrollbarWidth;window.drawScreen=function(e,n){for(var o=n.createImageData(320,240),t=0;t<o.data.length;t+=4){var a=Math.floor(256*Math.random());o.data[t+0]=a,o.data[t+1]=a,o.data[t+2]=a,o.data[t+3]=255}n.putImageData(o,0,0,0,0,e.width,e.height),n.restore(),setTimeout(window.drawScreen,40,e,n)};var s=window.drawScreen;window.noVideoStaticBG=function(){var e=document.createElement("canvas");e.id="noVideoCanvas",e.className="no-video",o("modalVideo").appendChild(e);var n=e.getContext("2d");s(e,n)};var c=window.noVideoStaticBG;window.noVideoStaticBGMessage=function(){var e=document.createElement("div");e.className="no-video-msg",e.innerHTML='Sorry - unable to load video!<br>Please try again and <a href="mailto:'.concat(o("playWalkthroughVideo").dataset.supportemail,'">contact us</a><br>if the issue persists.'),o("modalVideo").appendChild(e)};var r=window.noVideoStaticBGMessage;window.showNoVideoDisplay=function(){o("blackMaskModal").innerHTML='<div id="modalVideo" style="display: inline-block; max-width: 700px; height: 450px"></div>',c(),r()};var w=window.showNoVideoDisplay;window.repositionModal=function(e,n){var t=e,a=n;void 0!==o("modalVideo").videoWidth&&(t=.9*window.innerWidth,(a=.9*window.innerWidth/(e/n))>.8*window.innerHeight&&(a=.8*window.innerHeight,t=.8*window.innerHeight*(e/n))),o("modalVideo").width=t,o("modalVideo").height=a,o("modalVideo").style.width="".concat(t,"px"),o("modalVideo").style.height="".concat(a,"px");var i=(window.innerHeight-o("blackMaskModal").getBoundingClientRect().height-74)/2;o("blackMaskModal").style.top="".concat(i,"px"),o("blackMaskBtn").style.top="".concat(i+o("blackMaskModal").getBoundingClientRect().height+(!1===window.showingModalCloseBtn?-100:20),"px"),o("blackMaskBtn").style.left="".concat(window.innerWidth/2-o("blackMaskBtn").getBoundingClientRect().width/2,"px")};var u=window.repositionModal;window.slideInModalVideo=function(){o("blackMask").style.display="block",setTimeout((function(){o("blackMask").style.opacity="1"}),50),setTimeout((function(){o("blackMaskModal").style.display="block",setTimeout((function(){window.repositionModalInt=setInterval((function(e,n){u(e,n)}),40,void 0!==o("modalVideo").videoWidth?o("modalVideo").videoWidth:o("noVideoCanvas").getBoundingClientRect().width,void 0!==o("modalVideo").videoHeight?o("modalVideo").videoHeight:o("noVideoCanvas").getBoundingClientRect().height),setTimeout((function(){void 0!==o("modalVideo").videoWidth&&o("modalVideo").play()}),1200)}),50)}),1e3)};var p=window.slideInModalVideo;window.hideModalVideo=function(e){clearInterval(window.repositionModalInt),o("blackMaskModal").style.top="".concat(window.innerHeight+1e3,"px"),setTimeout((function(){o("blackMask").style.opacity="0",setTimeout((function(){o("blackMask").style.display="none",o("blackMaskModal").style.display="none",o("blackMaskModal").innerHTML="",o("blackMaskModal").style.top="-1000px",o("blackMaskBtn").style.top="-1000px";for(var n=0;n<=e;n++){setTimeout((function(e,n){var t=0===n?"none":"thin";t=.5>n?t:"auto",o("scrollbarWidthStyle").innerHTML="::-webkit-scrollbar {width: ".concat(e,"px;}\n")+"html {scrollbar-width: ".concat(t,";}")}),10*n,n,n/e)}setTimeout((function(){var e=o("scrollbarWidthStyle");e.parentNode.removeChild(e)}),10*e)}),500)}),1e3),setTimeout((function(){o("blackMaskBtn").style.display="none",o("blackMaskBtn").innerText=""}),200)};var g=window.hideModalVideo;window.logVideoWalkthroughView=function(){if(o("challenge-holder")){var e=o("challenge-holder").dataset,n=parseInt(e.base,10),a=parseInt(e.level,10),i=parseInt(e.challenge,10),d=e.csrf,l=t();l.open("POST","/api",!0),l.setRequestHeader("Content-type","application/x-www-form-urlencoded"),l.send("".concat("action=video_walkthrough_viewed&base=").concat(n,"&")+"level=".concat(a,"&")+"room=".concat(i,"&")+"csrf=".concat(d))}},window.showModalVideo=function(e,n){window.showingModalCloseBtn=!1;var t=l(),a=document.createElement("style");a.id="scrollbarWidthStyle",a.innerHTML="::-webkit-scrollbar {width: ".concat(t,"px;}\n")+"html {scrollbar-width: auto;}",document.head.appendChild(a);for(var i=t;0<=i;i--){setTimeout((function(e,n){var t=.5>n?"thin":"auto";t=0===n?"none":t,o("scrollbarWidthStyle").innerHTML="::-webkit-scrollbar {width: ".concat(e,"px;}\n")+"html {scrollbar-width: ".concat(t,";}")}),10*(t-i),i,i/t)}var d=-1<e.indexOf("cheating_message.mp4"),s=!1===d?" controls":"";o("blackMaskModal").innerHTML='<video id="modalVideo" width="0" height="0"'.concat(s,'><source src="').concat(e,'" type="video/mp4" id="modalVideoSrc"></video>'),o("modalVideoSrc").addEventListener("error",(function(){w()})),o("modalVideo").oncontextmenu=function(){return!1},o("modalVideo").onloadstart=function(){p()},!1===d&&(o("blackMaskBtn").style.display="inline-block",o("blackMaskBtn").innerText=n,o("blackMaskBtn").onclick=function(){void 0!==o("modalVideo").videoWidth&&o("modalVideo").pause(),g(t)},window.showingModalCloseBtn=!0),o("modalVideo").onended=function(){o("blackMaskBtn").style.display="inline-block",o("blackMaskBtn").innerText=n,o("blackMaskBtn").onclick=function(){g(t)},window.showingModalCloseBtn=!0}};var h=window.showModalVideo;window.handleLoginResponseError=function(e){o("loginMsg").innerHTML=e.login.message,o("loginMsg").style.display="block",o("loginMsg").classList.remove("flash-success"),o("loginMsg").classList.add("flash-error"),o("g-recaptcha-response")&&window.grecaptcha.reset()};var m=window.handleLoginResponseError;window.handleLoginResponse=function(e){if(200===e.status){var n=e.responseText,o=JSON.parse(n);"correct"===o.login.result||"error"===o.login.result?window.location=o.login.redirectURL:m(o)}return!0};var f=window.handleLoginResponse;window.login=function(e){var n=o("email").value,a=o("password").value,i=t();i.onreadystatechange=function(){4===i.readyState&&f(i)},i.open("POST","/api",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded");var d="action=login&email=".concat(encodeURIComponent(n),"&password=").concat(encodeURIComponent(a));void 0!==e&&(d+="&g-recaptcha-response=".concat(encodeURIComponent(e))),i.send(d)};var v=window.login;window.executeCaptcha=function(){window.grecaptcha.execute()};var b=window.executeCaptcha;window.loginCaptchaSubmit=function(e){v(e)};var y=window.loginCaptchaSubmit;window.handleAttemptFlag=function(e){if(200===e.status){var n=e.responseText,t=JSON.parse(n);a(t),"correct"===t.attempt.result?(o("successMsg").innerHTML=t.attempt.successMsg,i(),d()):(o("flagResponseMsg").innerHTML=t.attempt.message,o("flagResponseMsg").className="incorrect wiggle",setTimeout((function(){o("flagResponseMsg").innerHTML="",o("flagResponseMsg").className="incorrect",window.cpa_flagAttemptInProgress=!1}),2e3),-1<["Sorry, that's someone else's code.","Sorry, timed challenge has elapsed and that's someone else's code."].indexOf(t.attempt.message)&&h(o("challenge-holder").dataset.versionassetformat.replace("[FILE]","videos/cheating_message.mp4"),"I won't cheat again"))}else window.cpa_flagAttemptInProgress=!1};var k=window.handleAttemptFlag;window.attemptFlagXHR=function(){var e=t();window.cpa_flagAttemptInProgress=!0,e.onreadystatechange=function(){4===e.readyState&&k(e)},e.open("POST","/api",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=flag_attempt&flag=".concat(encodeURIComponent(o("codeAttempt").value),"&base=").concat(o("challenge-holder").dataset.base,"&level=").concat(o("challenge-holder").dataset.level,"&challenge=").concat(o("challenge-holder").dataset.challenge,"&csrf=").concat(o("challenge-holder").dataset.csrf))};var M=window.attemptFlagXHR;window.attemptFlag=function(){void 0!==window.cpa_flagAttemptInProgress&&!1!==window.cpa_flagAttemptInProgress||M()};var T=window.attemptFlag;window.getBadgeHTML=function(e,n,o){function t(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;")}var a=t(e.next.name),i=t(e.next.description),d=n.replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/``/g,"&grave;");return'\n        <div class="block block-badge">\n            <a href="/profile" class="link link-profile">&lt; View on profile</a>\n            <a href="" onclick="'.concat(o,' return false;" class="link link-close" id="badgeModalCloseLink">x Close</a>\n            <div class="top">\n                <div class="topic">New badge awarded!</div>\n                <h2 class="heading heading-secondary heading-center heading-light">').concat(a,'</h2>\n            </div>\n            <div class="bottom">\n                <div class="pin" style="background-image: url(\'/assets/images/asset-game-badge-').concat(d,'.png\');"></div>\n                <div class="description">').concat(i,"</div>\n            </div>\n        </div>\n    ")};var S=window.getBadgeHTML;window.displayBadge=function(e,n){var t="dismissBadge();";!1===e.isLast&&(t="showNewBadges('".concat(n,"');"));var a=e.next.name.replace(/\s+/g,"-").replace("%","-percent").toLowerCase(),i=o("badge-modal");i.innerHTML=S(e,a,t),i.style.display="block"};var C=window.displayBadge;window.dismissBadge=function(){o("badge-modal").style.display="none"};var x=window.dismissBadge;window.handleShowNewBadges=function(e,n){var o=e.responseText,t=JSON.parse(o);a(t),null!==t.badges.next&&C(t.badges,n)};var I=window.handleShowNewBadges;window.showNewBadges=function(e){x();var n=t();n.onreadystatechange=function(){4===n.readyState&&200===n.status&&I(n,e)},n.open("POST","/api",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var o="action=get_new_badges&csrf=".concat(e);n.send(o)};var V=window.showNewBadges;window.runChallengeTimer=function(){var e,n,a=!1,i=o("challenge-holder")||o("briefing-holder");if(i){var d=i.dataset,l=parseInt(d.base,10),s=parseInt(d.level,10),c=parseInt(d.challenge,10),r=parseInt(d.timeoutafter,10),w=parseInt(d.incrementtime,10),u=d.csrf,p=function(){a=!0},g=function(){clearTimeout(n),n=setTimeout(p,r),a=!1};n=setTimeout(p,r),document.hasFocus()&&(document.onmousemove=g,document.onscroll=g,document.onclick=g,document.onkeypress=g,document.onmousedown=g,document.ontouchstart=g),e=setInterval((function(){var n;!1===a&&((n=t()).onreadystatechange=function(){if(4===n.readyState&&200===n.status){var o=n.responseText;!0===JSON.parse(o).complete&&clearInterval(e)}},n.open("POST","api",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("action=update_time&base=".concat(l,"&level=").concat(s,"&challenge=").concat(c,"&csrf=").concat(u)))}),w)}};var L=window.runChallengeTimer;window.userOpensLevel=function(e,n,o){var i=t();i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=i.responseText,n=JSON.parse(e);a(n)}},i.open("POST","/api",!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send("action=open_level&base=".concat(e,"&level=").concat(n,"&csrf=").concat(o))};var R=window.userOpensLevel;window.userHintUsed=function(){var e=t();e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var n=e.responseText,t=JSON.parse(n);a(t),o("hintMsg").innerHTML=t.hint.text,window.$(".check").hide(),window.$(".text").fadeIn(),o("viewHintLink").innerHTML='View hint again <span class="highlight">></span>'}},e.open("POST","/api",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("action=use_hint&base=".concat(o("challenge-holder").dataset.base,"&level=").concat(o("challenge-holder").dataset.level,"&room=").concat(o("challenge-holder").dataset.challenge,"&csrf=").concat(o("challenge-holder").dataset.csrf))};var B=window.userHintUsed;window.scrollToTopShowFlag=function(){window.scrollInt=setInterval((function(){window.scrollPos=window.pageYOffset||document.documentElement.scrollTop,document.documentElement.scrollTop=0<window.scrollPos?window.scrollPos/1.1:0,document.body.scrollTop=document.documentElement.scrollTop,0===window.scrollPos&&(clearInterval(window.scrollInt),setTimeout((function(){o("msg-correct").style.display="block"}),200))}),20)};var H=window.scrollToTopShowFlag;window.scrollToYPos=function(e){void 0!==window.scrollInt&&clearInterval(window.scrollInt),window.scrollInt=setInterval((function(){var n=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.scrollLeft||document.body.scrollLeft;n-=.1*(n-e),window.scrollTo(o,n),void 0!==window.lastScrollTop&&n===window.lastScrollTop&&clearInterval(window.scrollInt),window.lastScrollTop=n}),20)};var O=window.scrollToYPos;window.showChallengeStatus=function(e){for(var n=["pending","reviewing","approved","denied"],t=0;t<n.length;t++)n[t]===e&&o("status_".concat(n[t])).classList.remove("hidden"),n[t]!==e&&o("status_".concat(n[t])).classList.add("hidden")};var $=window.showChallengeStatus;window.logFileDownload=function(e){var n=o("challenge-holder")||o("briefing-holder");if(n){var a=n.dataset,i=(e.getAttribute("href")?e.getAttribute("href"):e.getAttribute("src")).split("/").pop().split("?")[0],d=t();d.open("POST","api",!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send("action=file_download&base=".concat(parseInt(a.base,10),"&level=").concat(parseInt(a.level,10),"&challenge=").concat(parseInt(a.challenge,10),"&file=").concat(i,"&csrf=").concat(a.csrf))}};var P=window.logFileDownload;window.$(document).ready((function(){window.$(".tab").click((function(){return window.$podtoshow=window.$(this).data("podtoshow"),window.$(".challenge").find(".pod").hide(),window.$(".challenge").find("[data-podname='".concat(window.$podtoshow,"']")).show(),window.$(this).parent().find(".tab").removeClass("tab-selected"),window.$(this).addClass("tab-selected"),!1}));var e=0;setInterval((function(){3>e?(window.$(".dots").append("."),e++):(window.$(".dots").html(""),e=0)}),600),window.$(".link-nowhere").click((function(){return window.$(this).addClass("going-nowhere"),setTimeout((function(){window.$(".going-nowhere").removeClass("going-nowhere")}),1e3),!1})),window.$(".toggle-instructions").click((function(){return window.$(".instructions").toggleClass("start-hidden"),!1})),window.$("[data-download]").click((function(){P(this)})),window.$("[data-download]").contextmenu((function(){P(this)}))})),window.getCountdownTimeLeft=function(e){return"<strong> Time Left:</strong> <span>".concat(e," ").concat(60<=window.secsRemaining?"minute":"second").concat(1!==e?"s":"","</span><br>")};var _=window.getCountdownTimeLeft;window.getCountdownTimeRemaining=function(){return parseInt(window.secsRemaining/(60<=window.secsRemaining?60:1),10)};var F=window.getCountdownTimeRemaining;window.countdownUpdateDisplay=function(){var e;0>=window.secsRemaining?(e='<span class="highlight highlight-red-light">Session expired please reload the page</span><br>',void 0!==window.countdownInt&&clearInterval(window.countdownInt)):e=_(F()),o("timeleft").innerHTML=e};var N=window.countdownUpdateDisplay;window.formSubmit=function(e){var n=JSON.parse(e.dataset.submit.replace(/'/g,'"'));return"executeCaptcha"===n.type?(b(),!1):"login"===n.type?(v(),!1):"loginCaptchaSubmit"===n.type?(y(!1),!1):"attemptFlag"!==n.type||(T(),!1)};var W=window.formSubmit;window.$(document).ready((function(){o("timeleft")&&(window.secsRemaining=window.$("#timeleft").data("sshtime"),window.countdownInt=setInterval((function(){window.secsRemaining--,N()}),1e3),N()),o("show-hint")&&(o("show-hint").onclick=function(){return B(),!1}),window.$(".unlocked").click((function(){return window.$(this).parent().removeClass("floor-unlocked").addClass("floor-open"),R(window.$(this).data("base"),window.$(this).data("level"),window.$(this).data("csrf")),!1}));for(var e=0;e<document.forms.length;e++)document.forms[e].dataset&&document.forms[e].dataset.submit&&(document.forms[e].onsubmit=function(){return W(this)});void 0!==window.displayNewBadges&&V(window.csrf),void 0!==window.startChallengeTimer&&!0===window.startChallengeTimer&&L(),void 0!==window.showUserChallengeStatus&&$(window.showUserChallengeStatus),void 0!==window.doScrollToTopShowFlag&&H(),void 0!==window.doScrollToYPos&&O(window.doScrollToYPos)})),void 0!==window.hljs&&window.hljs.initHighlightingOnLoad()}});